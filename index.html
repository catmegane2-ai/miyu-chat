<script>
// ←ここに君のSuperGrok APIキーを入れる（x.ai/consoleで取得）
const API_KEY = "xai-N3T00g4kCI1LQl2gYj6GwouParRJ7CdFDc8AAQ78UICfo8F3GVjulJJ4T9CENej4WN12DrFiqoATJEZW";

function send() {
  const input = document.getElementById("msg");
  const text = input.value.trim();
  if (!text) return;

  // ユーザーの発言をすぐ表示
  addMessage("You", text);
  input.value = "";

  fetch("https://api.x.ai/v1/chat/completions", {
    method: "POST",
    headers: {
      "Authorization": "Bearer " + API_KEY,
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      model: "grok-4",
      messages: [{ role: "user", content: text }],
      temperature: 0.7
    })
  })
  .then(r => r.json())
  .then(data => {
    const reply = data.choices[0].message.content;
    addMessage("Miyu", reply);
  })
  .catch(err => {
    addMessage("Error", "通信エラーです");
    console.error(err);
  });
}

// チャットログを画面に追加する関数（これだけ今は必要）
function addMessage(sender, text) {
  const div = document.createElement("div");
  div.textContent = sender + ": " + text;
  div.style.cssText = "margin:8px 12px;padding:10px;background:rgba(255,255,255,0.15);border-radius:12px;color:white;";
  document.getElementById("chatlog").appendChild(div);
  div.scrollIntoView({behavior:"smooth"});
}
</script>